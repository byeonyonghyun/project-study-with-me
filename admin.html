<!-- âœ… admin.html -->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>ê´€ë¦¬ì ìœ ì € ëª©ë¡</title>
</head>
<body>
<h2>ğŸ“‹ ì „ì²´ ìœ ì € ëª©ë¡ (ê´€ë¦¬ì ì „ìš©)</h2>

<!-- âœ… ì „ì²´ ìœ ì € ëª©ë¡ì„ ê°€ì ¸ì˜¤ëŠ” ë²„íŠ¼ -->
<button onclick="fetchUsers()">ìœ ì € ë¶ˆëŸ¬ì˜¤ê¸°</button>
<br><br>

<table border="1" id="userTable" style="display:none;">
    <thead>
    <tr>
        <th>ID</th>
        <th>ì´ë¦„</th>
        <th>ë‹‰ë„¤ì„</th>
        <th>ì´ë©”ì¼</th>
        <th>ì§ì—…</th>
        <th>ê¶Œí•œ</th>
    </tr>
    </thead>
    <tbody id="userBody">
    </tbody>
</table>

<script>
    function fetchUsers() {
        fetch('/admin/users')
            .then(response => {
                if (!response.ok) {
                    alert("â›” ê´€ë¦¬ìë§Œ ì ‘ê·¼ ê°€ëŠ¥í•©ë‹ˆë‹¤!");
                    return [];
                }
                return response.json();
            })
            .then(data => {
                const table = document.getElementById("userTable");
                const tbody = document.getElementById("userBody");
                tbody.innerHTML = ""; // ì´ˆê¸°í™”

                data.forEach(user => {
                    const row = document.createElement("tr");
                    row.innerHTML = `
                        <td>${user.id}</td>
                        <td>${user.name}</td>
                        <td>${user.nickname}</td>
                        <td>${user.email}</td>
                        <td>${user.job}</td>
                        <td>${user.role}</td>
                    `;
                    tbody.appendChild(row);
                });

                table.style.display = "table";
            });
    }
</script>

<br>
<a href="/login.html">ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ</a>
</body>
</html>
